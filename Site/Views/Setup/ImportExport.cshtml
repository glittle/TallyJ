@model ImportExportModel
@using TallyJ.Code.Session
@{
    ViewBag.Title = "Import / Export";
    ViewBag.Message = "Dealing with the names in the community";

    ContextItems.AddJavascriptForPage("controllerUrl", "importExportPage.controllerUrl={0};".FilledWith(@Url.Action("Index", "Setup").QuotedForJavascript()));
    ContextItems.AddJavascriptForPage("time", "importExportPage.serverTime={0};".FilledWith(DateTime.Now.SerializedAsJsonString()));
    ContextItems.AddJavascriptForPage("previous", "importExportPage.previousFiles={0};".FilledWith(Model.PreviousUploads().SerializedAsJsonString()));
}
<script src="@Url.Content("~/Scripts/fileuploader.js")" type="text/javascript"></script>
<p>
    To re-clean the data before this election, removing voting information (who can
    vote, where they voted, who is ineligible):
    <button type="button" id="btnResetList">
        Reset voting information</button>
</p>
<p>
    <button type="button" onclick="location.href='ImportExport'">
        Refresh Page</button>
</p>
<p>
  Import from names from a CSV text file. May be called a "Microsoft Excel Comma Separated
  Values File".
</p>
<div id="file-uploader"></div>
<div class="uploadList">
    <h3>Previously Uploaded Files</h3>
    <table>
        <thead>
            <tr>
                <th>
                    Status
                </th>
                <th>
                    Name
                </th>
                <th>
                    Upload Time
                </th>
                <th>
                    Size
                </th>
                <th>
                    Actions
                </th>
            </tr>
        </thead>
        <tbody id="uploadListBody">
            <tr data-rowid="{C_RowId}">
                <td>
                    {ProcessingStatus}
                </td>
                <td>
                    {OriginalFileName}
                </td>
                <td>
                    {UploadTimeExt}
                </td>
                <td>
                    {FileSize}
                </td>
                <td>
                    <button type="button" class="download" title="Download a copy of this file">
                        <span class="ui-icon ui-icon-arrowreturn-1-s"></span>
                    </button>
                    <button type="button" class="deleteFile" title="Permanently delete this from the server">
                        <span class="ui-icon ui-icon-trash"></span>
                    </button>
                </td>
            </tr>
        </tbody>
    </table>
</div>
